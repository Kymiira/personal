<head>
    <link ref="stylesheet" href="./exptr.css">
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const el = {
                name: document.getElementById('myName'),
                number: document.getElementById('myNumber'),
                output: document.getElementById('myOutput'),
                submit: document.getElementById('mySubmit'),
                form: document.getElementById('myForm')
            }

            const entries = [];

            const render = () => {
                const total = entries.reduce((acc, curr) => acc + curr.number, 0)

                const listHtml = entries.map(entry => `
                    <div class="entry-item">
                        <strong>${entry.name}</strong>: $${entry.number.toFixed(2)}
                        <small style="color: gray;">(${entry.timestamp})</small>
                    </div>
                `).join('');

                el.output.innerHTML = `
                    <div class="entry-list">$listHtml || '<em>No entries yet.</em>'}</div>
                    <hr>
                    <strong>Total: $${total.toFixed(2)}</strong>
                `;
            };

            const addEntry = (e) => {
                e.preventDefault();

                const entry = {
                    name: el.name.value,
                    number: parseFloat(el.number.value),
                    timestamp: new Date().toLocaleTimeString()
                }

                if (entry.name && !isNaN(entry.number)) {
                    entries.push(entry);
                    render();
                    el.form.reset()
                    el.name.focus()
                    console.log('if, work');
                }
                console.log('addEntry, work');
            }

            el.form.addEventListener('submit', addEntry);
            el.submit.addEventListener('click', addEntry);
        })

    </script>
</head>
<body>
    <header>
        <h1>Expense Tracker</h1>
    </header>
    <main>
        <form id="myForm">
            <input id="myName" type="text" placeholder="item name"><br>
            <input id="myNumber" type="number" placeholder="item cost"><br>
            <input id="mySubmit" type="button" placeholder="submit" value="submit"><br>
            <hr>
            <span id="myOutput"></span>
        </form>
        
    </main>
</body>